<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>ì§€ë¢°ì°¾ê¸° ê²Œì„</title>
    <style>
        body {
            text-align: center;
        }
        .grid {
            display: grid;
            grid-template-columns: repeat(10, 30px); /* 10x10 ê·¸ë¦¬ë“œ */
            gap: 2px;
        }
        .cell {
            width: 30px;
            height: 30px;
            border: 1px solid #ccc;
            text-align: center;
            vertical-align: middle;
            line-height: 30px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <h1>ì§€ë¢°ì°¾ê¸° ê²Œì„</h1>
    <div class="grid" id="grid"></div>

    <script>
        // ê²Œì„ ì„¤ì •
        const numRows = 10;
        const numCols = 10;
        const numMines = 20;
        
        // ê·¸ë¦¬ë“œ ìƒì„±
        const grid = document.getElementById("grid");
        for (let i = 0; i < numRows; i++) {
            for (let j = 0; j < numCols; j++) {
                const cell = document.createElement("div");
                cell.classList.add("cell");
                cell.dataset.row = i;
                cell.dataset.col = j;
                grid.appendChild(cell);
            }
        }
        
        // ì§€ë¢° ë°°ì¹˜
        const mines = [];
        while (mines.length < numMines) {
            const row = Math.floor(Math.random() * numRows);
            const col = Math.floor(Math.random() * numCols);
            if (!mines.some(mine => mine.row === row && mine.col === col)) {
                mines.push({ row, col });
                const cell = document.querySelector(`.cell[data-row="${row}"][data-col="${col}"]`);
                cell.dataset.mine = true;
            }
        }
        
        // ì…€ í´ë¦­ ì´ë²¤íŠ¸
        grid.addEventListener("click", handleCellClick);
        
        function handleCellClick(event) {
            const cell = event.target;
            if (cell.classList.contains("cell") && !cell.classList.contains("revealed")) {
                cell.classList.add("revealed");
                if (cell.dataset.mine) {
                    cell.textContent = "ğŸ’£ï¸";
                    alert("ì§€ë¢° í­íŒ”!");
                    history.go(0)

                } else {
                    const row = parseInt(cell.dataset.row);
                    const col = parseInt(cell.dataset.col);
                    const mineCount = countAdjacentMines(row, col);
                    if (mineCount > 0) {
                        cell.textContent = mineCount;
                    } else {
                        // ì£¼ë³€ ì§€ë¢° ì—†ìœ¼ë©´ ì£¼ë³€ ì…€ë„ ìë™ìœ¼ë¡œ ì—´ê¸°
                        revealEmptyCells(row, col);
                    }
                }
            }
        }
        
        // ì§€ë¢° ìˆ˜ ê³„ì‚°
        function countAdjacentMines(row, col) {
            const neighbors = [
                { r: -1, c: -1 }, { r: -1, c: 0 }, { r: -1, c: 1 },
                { r: 0, c: -1 },                  { r: 0, c: 1 },
                { r: 1, c: -1 }, { r: 1, c: 0 }, { r: 1, c: 1 }
            ];
            let mineCount = 0;
            for (const neighbor of neighbors) {
                const r = row + neighbor.r;
                const c = col + neighbor.c;
                const neighborCell = document.querySelector(`.cell[data-row="${r}"][data-col="${c}"]`);
                if (neighborCell && neighborCell.dataset.mine) {
                    mineCount++;
                }
            }
            return mineCount;
        }
        
        // ì£¼ë³€ ì§€ë¢° ì—†ëŠ” ì…€ ìë™ ì—´ê¸°
        function revealEmptyCells(row, col) {
            const neighbors = [
                { r: -1, c: -1 }, { r: -1, c: 0 }, { r: -1, c: 1 },
                { r: 0, c: -1 },                  { r: 0, c: 1 },
                { r: 1, c: -1 }, { r: 1, c: 0 }, { r: 1, c: 1 }
            ];
            for (const neighbor of neighbors) {
                const r = row + neighbor.r;
                const c = col + neighbor.c;
                const neighborCell = document.querySelector(`.cell[data-row="${r}"][data-col="${c}"]`);
                if (neighborCell && !neighborCell.classList.contains("revealed")) {
                    neighborCell.classList.add("revealed");
                    const mineCount = countAdjacentMines(r, c);
                    if (mineCount > 0) {
                        neighborCell.textContent = mineCount;
                    } else {
                        revealEmptyCells(r, c);
                    }
                }
            }
        }
    </script>
</body>
</html>
